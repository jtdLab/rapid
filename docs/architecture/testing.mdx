# Testing

## Integration Testing (E2E)

With [integration testing](https://docs.flutter.dev/cookbook/testing/integration/introduction), developers can confidently deliver a robust user experience by verifying that all parts of the application work harmoniously together, minimizing the risk of issues arising from the integration of different functionalities and reducing the chance of unexpected problems for end-users.
Every Rapid project comes with a ready-to-use integration testing setup located inside the root package of each supported platform, and supports running integration tests in multiple environments.

<Image
  src="assets/integration_test_setup.png"
  alt="Integration Test Setup"
  zoom={false}
  width="300"
  height="525"
  caption="Integration Test Setup."
/>

### Adding Integration Tests

Adding a new integration test includes two steps:

1. Create a new file inside the `integration_test` directory.

```dart
// sign_in_username_password.dart

import 'package:flutter_test/flutter_test.dart';

Future<void> performTest(WidgetTester tester) async {
  await tester.pumpAndSettle();

  // testing logic goes here
}
```

2. Add the test to the environment runners.

<Tabs
  groupId="environments"
  values={[
    { label: "development", value: "development" },
    { label: "test", value: "test" },
    { label: "production", value: "production" },
  ]}
>
<TabItem value="development">

```dart
// development_test.dart

...
import 'sign_in_username_password.dart' as sign_in_username_password;


void main() {
  ...

  group('E2E (development)', () {
    ...

    testWidgets('sign in with username and password', (tester) async {
      dev.main();

      await sign_in_username_password.performTest(tester);
    });
  });
}
```

</TabItem>
<TabItem value="test">

```dart
// test_test.dart

...
import 'sign_in_username_password.dart' as sign_in_username_password;


void main() {
  ...

  group('E2E (test)', () {
    ...

    testWidgets('sign in with username and password', (tester) async {
      test.main();

      await sign_in_username_password.performTest(tester);
    });
  });
}
```

</TabItem>
<TabItem value="production">

```dart
// production_test.dart

...
import 'sign_in_username_password.dart' as sign_in_username_password;


void main() {
  ...

  group('E2E (production)', () {
    ...

    testWidgets('sign in with username and password', (tester) async {
      production.main();

      await sign_in_username_password.performTest(tester);
    });
  });
}
```

</TabItem>
</Tabs>

### Running Integration Tests

<Tabs
  values={[
    { label: "rapid", value: "rapid" },
    { label: "native", value: "native" },
  ]}
>
<TabItem value="rapid">

TODO

```bash
melos test:e2e
```

Web:

```bash
melos test:e2e:web
```

</TabItem>
<TabItem value="native">

TODO

```bash
flutter test integration_test/development_test.dart

flutter test integration_test/test_test.dart

flutter test integration_test/production_test.dart
```

Web:

```bash
chromedriver --port=4444

flutter drive \
  --driver=test_driver/integration_test.dart \
  --target=integration_test/development_test.dart \
  -d chrome

  flutter drive \
  --driver=test_driver/integration_test.dart \
  --target=integration_test/test_test.dart \
  -d chrome

  flutter drive \
  --driver=test_driver/integration_test.dart \
  --target=integration_test/production_test.dart \
  -d chrome
```

</TabItem>
</Tabs>

## Unit & Widget Testing
